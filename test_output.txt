
WARNING: You are using Node.js 25.1.0 which is not supported by Hardhat.
Please upgrade to 22.10.0 or a later LTS version (even major version number)

[dotenv@17.2.3] injecting env (0) from ../.env -- tip: ðŸ—‚ï¸ backup and recover secrets: https://dotenvx.com/ops
Nothing to compile
Nothing to compile

Running Mocha tests


  ExpireNFT
    Deployment
      âœ” Should set the correct name and symbol
      âœ” Should set the correct owner
      âœ” Should initialize with zero minted tokens
      âœ” Should have max supply of 10000
      âœ” Should have correct available tokens
      âœ” Should have mint price of 0
    Mint Price Configuration
      âœ” Should allow owner to set mint price
      âœ” Should not allow non-owner to set mint price
    Base URI
      âœ” Should allow owner to set base URI
      âœ” Should not allow non-owner to set base URI
    mintAtIndex
      âœ” Should mint a specific token ID
      âœ” Should emit MintedAtIndex event
      âœ” Should require payment when mint price is set
      âœ” Should not allow minting the same token twice
      âœ” Should not allow minting token ID >= MAX_SUPPLY
      âœ” Should decrease available tokens
      âœ” Should update ownedIds correctly
    mintRandom
      âœ” Should mint a random token (86ms)
      âœ” Should emit MintedRandom event (43ms)
      âœ” Should mint different tokens on multiple calls
      âœ” Should work with consistent gas across mints (4727ms)
      âœ” Should require payment when mint price is set (2316ms)
      âœ” Should decrease available count
    mintReserve
      âœ” Should allow owner to reserve mint
      âœ” Should emit MintedReserve event
      âœ” Should not allow non-owner to reserve mint
      âœ” Should not require payment
    mintReserveBatch
      âœ” Should batch mint multiple tokens
      âœ” Should not allow non-owner to batch mint
      âœ” Should fail if exceeding max supply (167ms)
    Expiration Date
      âœ” Should allow owner to set expiration date
      âœ” Should emit ExpireDateSet event
      âœ” Should not allow setting expiration in the past
      âœ” Should prevent minting after expiration
    Activity Period
      âœ” Should allow owner to set activity period
      âœ” Should emit ActivityPeriodSet event
      âœ” Should not allow end time before start time
      âœ” Should check if transfer is active
      âœ” Should check if activity has ended
    Transfers
      âœ” Should allow transfer during active period
      âœ” Should block transfer before activity start
      âœ” Should block transfer after activity end
      âœ” Should update ownedIds after transfer
    Burn
      1) Should allow owner to burn their token
      âœ” Should emit TokenBurned event
      âœ” Should not allow non-owner to burn before activity end
ownerOf(1) reverted as expected
      2) Should allow anyone to burn after activity end
      âœ” Should update ownedIds after burn
    getAvailableTokens
      âœ” Should return available tokens
      âœ” Should return fewer tokens if less available (26809ms)
      âœ” Should not allow limit > 100
      âœ” Should return correct tokens after some mints
    ownedIds
      âœ” Should return empty array for non-owner
      âœ” Should return all owned token IDs
      âœ” Should update after transfer
    Withdraw
      âœ” Should allow owner to withdraw funds
      âœ” Should not allow non-owner to withdraw
      âœ” Should fail if no balance
    Gas Optimization Tests
      âœ” mintRandom should have consistent gas (15840ms)


  57 passing (51s)
  2 failing

  1) ExpireNFT
       Burn
         Should allow owner to burn their token:
     HardhatError: HHE70024: The .reverted matcher has been deprecated. Use .revert(ethers) instead.
      at _Assertion.<anonymous> (node_modules/@nomicfoundation/hardhat-ethers-chai-matchers/src/internal/matchers/reverted/legacyReverted.ts:15:11)
      at _Assertion.propertyGetter (file:///Users/entronica/Desktop/Coding/smartcontract/node_modules/chai/index.js:1557:27)
      at doAsserterAsyncAndAddThen (file:///Users/entronica/Desktop/Coding/smartcontract/node_modules/chai-as-promised/lib/chai-as-promised.js:340:16)
      at _Assertion.<anonymous> (file:///Users/entronica/Desktop/Coding/smartcontract/node_modules/chai-as-promised/lib/chai-as-promised.js:329:15)
      at _Assertion.overwritingPropertyGetter (file:///Users/entronica/Desktop/Coding/smartcontract/node_modules/chai/index.js:1709:35)
      at Reflect.get (<anonymous>)
      at Object.proxyGetter [as get] (file:///Users/entronica/Desktop/Coding/smartcontract/node_modules/chai/index.js:1645:22)
      at Context.<anonymous> (test/ExpireNFT.ts:429:47)

  2) ExpireNFT
       Burn
         Should allow anyone to burn after activity end:
     HardhatError: HHE70024: The .reverted matcher has been deprecated. Use .revert(ethers) instead.
      at _Assertion.<anonymous> (node_modules/@nomicfoundation/hardhat-ethers-chai-matchers/src/internal/matchers/reverted/legacyReverted.ts:15:11)
      at _Assertion.propertyGetter (file:///Users/entronica/Desktop/Coding/smartcontract/node_modules/chai/index.js:1557:27)
      at doAsserterAsyncAndAddThen (file:///Users/entronica/Desktop/Coding/smartcontract/node_modules/chai-as-promised/lib/chai-as-promised.js:340:16)
      at _Assertion.<anonymous> (file:///Users/entronica/Desktop/Coding/smartcontract/node_modules/chai-as-promised/lib/chai-as-promised.js:329:15)
      at _Assertion.overwritingPropertyGetter (file:///Users/entronica/Desktop/Coding/smartcontract/node_modules/chai/index.js:1709:35)
      at Reflect.get (<anonymous>)
      at Object.proxyGetter [as get] (file:///Users/entronica/Desktop/Coding/smartcontract/node_modules/chai/index.js:1645:22)
      at Context.<anonymous> (test/ExpireNFT.ts:458:47)




Test run failed
